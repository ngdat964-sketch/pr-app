<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">

<link rel="apple-touch-icon" href="icon.png">

<meta name="viewport"
      content="width=device-width,
               initial-scale=1.0,
               maximum-scale=1.0,
               user-scalable=no,
               viewport-fit=cover">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<title>QR Access</title>

<style>
body{
    margin:0;
    background:#2f3347;
    font-family:Arial,sans-serif;
    text-align:center;
    color:#fff;
}

/* CHáº¶N ZOOM */
html, body{
    touch-action: manipulation;
    overscroll-behavior: none;
    -webkit-text-size-adjust: 100%;
}

/* TÃŠN */
.name{
    margin:24px 0 14px;
    font-size:21px;
    font-weight:bold;
    color:#f0d58c;
}

/* CARD */
.card{
    width:80%;
    max-width:320px;
    margin:0 auto;
    background:#fff;
    border-radius:22px;
    padding-bottom:24px;
    color:#000;
    overflow:hidden;
}

/* HEADER */
.card-header{
    position:relative;
    background:#ffb703;
    color:#fff;
    padding:13px 12px;
    font-size:14px;
}

/* DATE */
.datetime{
    margin:24px 0 10px;
    font-size:20px;
    font-weight:bold;
}

/* ğŸ”µ DÃ’NG CHá»® XANH */
.blink-text{
    font-size:14px;
    color:#1e90ff;
    margin-bottom:8px;
    animation:blink 1.5s infinite;
}
@keyframes blink{
    0%,50%,100%{opacity:1;}
    25%,75%{opacity:0;}
}

/* QR */
.qr{
    margin:6px auto;
    width:230px;
    position:relative;
}
.qr img{ width:100%; }

/* REFRESH */
.refresh{
    margin-top:10px;
    color:#888;
    font-size:14px;
}

/* TIMER */
.timer{
    margin-top:8px;
    font-size:24px;
    font-weight:bold;
    color:#2ecc71;
}

/* NOTE */
.note{
    margin:24px auto;
    max-width:300px;
    font-size:14px;
    color:#bfc3d9;
    line-height:1.85;
    text-align:left;
}
.note .line{ display:block; }

/* CHE STATUS BAR iOS */
.safe-cover{
    position:fixed;
    top:0;left:0;right:0;
    height:env(safe-area-inset-top);
    background:#2f3347;
    z-index:9999;
}
</style>
</head>

<body>

<div class="safe-cover"></div>

<div class="name">
Nguyá»…n Anh Tuáº¥n (V25092261)
</div>

<div class="card">

    <div class="card-header">
        å°†äºŒç»´ç å¯¹å‡†æ‰«æå™¨åˆ·æ–°å‡ºåœº
    </div>

    <div class="datetime" id="datetime"></div>

    <!-- CHá»® XANH -->
    <div class="blink-text">Access Valid</div>

    <div class="qr">
        <img id="qrImage" src="qr.png">
    </div>

    <div class="refresh" onclick="refreshQR()">åˆ·æ–°äºŒç»´ç </div>

    <!-- HIá»‚N THá»Š 00:00 -->
    <div class="timer" id="timer">00:00</div>

</div>

<div class="note">
    <span class="line">å°Šæ•¬çš„å‘˜å·¥æ‚¨å¥½ï¼Œæ‚¨å·²è¿›å…¥ä¼ä¸šæ¶‰å¯†åŒºåŸŸï¼Œ</span>
    <span class="line">å‡ºäºä¼ä¸šå®‰å…¨è€ƒè™‘ï¼Œæ‚¨çš„æ‰‹æœºæ‘„åƒå¤´å°†è¢«ç¦æ­¢ï¼Œ</span>
    <span class="line">æ„Ÿè°¢æ‚¨çš„é…åˆã€‚</span>
</div>

<script>
// DATE TIME
function updateDateTime(){
    const n=new Date();
    document.getElementById("datetime").innerText=
        n.getFullYear()+"-"+
        String(n.getMonth()+1).padStart(2,"0")+"-"+
        String(n.getDate()).padStart(2,"0")+" "+
        String(n.getHours()).padStart(2,"0")+":"+
        String(n.getMinutes()).padStart(2,"0")+":"+
        String(n.getSeconds()).padStart(2,"0");
}
setInterval(updateDateTime,1000);
updateDateTime();

// TIMER LOGIC GIá»® NGUYÃŠN
let seconds=0;
setInterval(()=>{
    seconds++;
    renderTimer();
},1000);

function renderTimer(){
    const mm=String(Math.floor((seconds%3600)/60)).padStart(2,"0");
    const ss=String(seconds%60).padStart(2,"0");
    document.getElementById("timer").innerText=mm+":"+ss;
}

// CLICK 3 Láº¦N â€“ GIá»® NGUYÃŠN
let clickCount=0;
let step=0;
const steps=[9000,18000,28800,0]; // 02:30:00 / 05:00:00 / 08:00:00
document.querySelector(".name").onclick=()=>{
    clickCount++;
    if(clickCount===3){
        seconds=steps[step];
        renderTimer();
        step=(step+1)%steps.length;
        clickCount=0;
    }
};

// QR
function refreshQR(){
    document.getElementById("qrImage").src="qr.png?t="+Date.now();
}

// CHáº¶N ZOOM iOS
document.addEventListener('touchmove',e=>{
    if(e.scale && e.scale!==1) e.preventDefault();
},{passive:false});
</script>

</body>
</html>
