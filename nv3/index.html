<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">

<meta name="viewport"
      content="width=device-width,
               initial-scale=1.0,
               maximum-scale=1.0,
               user-scalable=no,
               viewport-fit=cover">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<title>QR Access</title>

<style>
html,body{
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    background:#2f3347;
    font-family:Arial,Helvetica,sans-serif;
    text-align:center;
    color:#fff;
    overflow:hidden;
    touch-action:manipulation;
    -webkit-text-size-adjust:100%;
}

.name{
    margin:22px 0 14px;
    font-size:18px;
    color:#f0d58c;
}

.card{
    width:82%;
    max-width:330px;
    margin:0 auto;
    background:#fff;
    border-radius:22px;
    padding-bottom:24px;
    color:#000;
    position:relative;
}

.header{
    background:#ffb703;
    color:#fff;
    padding:12px;
    font-size:14px;
    border-top-left-radius:22px;
    border-top-right-radius:22px;
}

.blink{
    margin-top:10px;
    font-size:15px;
    color:#2ecc71;
    animation:blink 1.5s infinite;
}

@keyframes blink{
    0%,50%,100%{opacity:1;}
    25%,75%{opacity:0;}
}

.datetime{
    margin:8px 0;
    font-size:18px;
    font-weight:bold;
}

.qr{
    margin:10px auto;
    width:220px;
}

.qr img{
    width:100%;
}

.timer{
    margin-top:8px;
    font-size:24px;
    font-weight:bold;
    color:#2ecc71;
}
</style>
</head>

<body>

<div class="name" id="name">
Mã NV V25092218
</div>

<div class="card">
    <div class="header">将二维码对准扫描器刷新出场</div>
    <div class="blink">已生效</div>
    <div class="datetime" id="datetime"></div>
    <div class="qr">
        <img src="qr.png">
    </div>
    <div class="timer" id="timer">00:00:00</div>
</div>

<script>
// datetime
function updateDate(){
    const d=new Date();
    document.getElementById("datetime").innerText=
        d.getFullYear()+"-"+String(d.getMonth()+1).padStart(2,"0")+"-"+
        String(d.getDate()).padStart(2,"0")+" "+
        String(d.getHours()).padStart(2,"0")+":"+
        String(d.getMinutes()).padStart(2,"0")+":"+
        String(d.getSeconds()).padStart(2,"0");
}
setInterval(updateDate,1000);
updateDate();

// timer
let seconds=0;
setInterval(()=>{
    seconds++;
    renderTimer();
},1000);

function renderTimer(){
    document.getElementById("timer").innerText=
        String(Math.floor(seconds/3600)).padStart(2,"0")+":"+
        String(Math.floor((seconds%3600)/60)).padStart(2,"0")+":"+
        String(seconds%60).padStart(2,"0");
}

// click 3 lần
let click=0, step=0;
const steps=[2*3600+30*60,5*3600,8*3600];

document.getElementById("name").onclick=()=>{
    click++;
    if(click===3){
        seconds=steps[step];
        renderTimer();
        step=(step+1)%steps.length;
        click=0;
    }
};

// chặn zoom
document.addEventListener("touchmove",e=>{
    if(e.scale && e.scale!==1) e.preventDefault();
},{passive:false});

let last=0;
document.addEventListener("touchend",e=>{
    const now=Date.now();
    if(now-last<300) e.preventDefault();
    last=now;
});
</script>

</body>
</html>
