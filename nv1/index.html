<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>QR Access</title>

<style>
body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    background:#2f3448;
    color:#fff;
}

/* Header tên NV */
.header{
    text-align:center;
    padding:18px 10px;
    font-size:22px;
    font-weight:bold;
    color:#f6d77a;
}

/* Card */
.card{
    width:90%;
    max-width:360px;
    margin:0 auto;
    background:#fff;
    color:#000;
    border-radius:18px;
    overflow:hidden;
    position:relative;
}

/* Thanh vàng */
.card-top{
    background:#ffbe0b;
    text-align:center;
    padding:14px 10px;
    font-size:15px;
    font-weight:600;
}

/* Khuyết hai bên */
.card-top::before,
.card-top::after{
    content:"";
    position:absolute;
    top:48px;
    width:26px;
    height:26px;
    background:#2f3448;
    border-radius:50%;
}
.card-top::before{ left:-13px; }
.card-top::after{ right:-13px; }

/* Nội dung */
.content{
    text-align:center;
    padding:16px 10px 20px;
}

.datetime{
    font-size:20px;
    font-weight:bold;
    margin-bottom:12px;
}

/* QR */
.qr-box{
    width:220px;
    height:220px;
    margin:0 auto 12px;
    position:relative;
}
.qr-box img{
    width:100%;
    height:100%;
    transition:transform 0.6s ease, opacity 0.4s ease;
}
.qr-box.loading img{
    transform:rotate(360deg) scale(0.9);
    opacity:0.4;
}

/* Text */
.refresh-text{
    font-size:14px;
    color:#777;
    margin-bottom:6px;
}

/* Time */
.timer{
    font-size:28px;
    font-weight:bold;
    color:#2ecc71;
}

/* Chú thích */
.note{
    width:90%;
    max-width:380px;
    margin:18px auto;
    font-size:14px;
    line-height:1.5;
    color:#cfd3ff;
}
</style>
</head>

<body>

<div class="header" id="employee">
    V25021784 (Hoàng A Toàn)
</div>

<div class="card">
    <div class="card-top">
        将二维码对准扫描器刷新出场
    </div>

    <div class="content">
        <div class="datetime" id="datetime"></div>

        <div class="qr-box" id="qrBox">
            <img id="qrImg" src="qr1.png">
        </div>

        <div class="refresh-text">刷新二维码</div>
        <div class="timer" id="timer">00:00:00</div>
    </div>
</div>

<div class="note">
    尊敬的员工您好，您已进入企业涉密区域，出于企业安全考虑，
    您的手机摄像头将被禁止拍摄，感谢您的配合。
</div>

<script>
/* ====== Thời gian thực ====== */
function updateDateTime(){
    const d = new Date();
    const f = n => n.toString().padStart(2,'0');
    document.getElementById('datetime').innerText =
        `${d.getFullYear()}-${f(d.getMonth()+1)}-${f(d.getDate())} `
      + `${f(d.getHours())}:${f(d.getMinutes())}:${f(d.getSeconds())}`;
}
setInterval(updateDateTime,1000);
updateDateTime();

/* ====== Timer ====== */
let seconds = 0;
let presetIndex = 0;
const presets = [0, 9000, 18000, 28800]; // 0, 2h30, 5h, 8h

function renderTimer(){
    const h = Math.floor(seconds/3600);
    const m = Math.floor((seconds%3600)/60);
    const s = seconds%60;
    document.getElementById('timer').innerText =
        `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}

setInterval(()=>{
    seconds++;
    renderTimer();
},1000);

/* ====== Click mã NV ====== */
document.getElementById('employee').onclick = ()=>{
    presetIndex = (presetIndex + 1) % presets.length;
    seconds = presets[presetIndex];
    renderTimer();
};

/* ====== QR đổi + hiệu ứng ====== */
let qrState = 0;
setInterval(()=>{
    const box = document.getElementById('qrBox');
    const img = document.getElementById('qrImg');

    box.classList.add('loading');
    setTimeout(()=>{
        qrState = 1 - qrState;
        img.src = qrState ? 'qr2.png' : 'qr1.png';
        box.classList.remove('loading');
    },400);
},5000);
</script>

</body>
</html>
