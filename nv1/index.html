<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Access</title>

<style>
body{
    margin:0;
    background:#2f354d;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
    color:#fff;
}

.header{
    text-align:center;
    padding:16px 10px;
    font-size:24px;
    font-weight:700;
    color:#f4d48a;
}

.card{
    position:relative;
    width:340px;
    margin:0 auto;
    background:#fff;
    border-radius:18px;
    overflow:hidden;
    color:#000;
}

/* KHUYẾT – SÁT ẢNH GỐC */
.card::before,
.card::after{
    content:"";
    position:absolute;
    top:68px;              /* HẠ THẤP XUỐNG */
    width:14px;
    height:14px;
    background:#2f354d;
    border-radius:50%;
    z-index:5;
}
.card::before{ left:20px; }
.card::after{ right:20px; }

.top{
    background:#f7b500;
    text-align:center;
    padding:14px 10px;
    font-weight:600;
    font-size:15px;
}

.content{
    padding:14px;
    text-align:center;
}

.time{
    font-size:26px;
    font-weight:700;
    margin-bottom:10px;
}

.qr-box{
    position:relative;
    width:220px;
    height:220px;
    margin:0 auto;
}

.qr-box img{
    width:100%;
    height:100%;
    transition:opacity .4s;
}

.loading{
    position:absolute;
    inset:0;
    background:rgba(255,255,255,.6);
    display:none;
}

.refresh{
    margin-top:10px;
    color:#777;
    cursor:pointer;
}

.timer{
    font-size:26px;
    font-weight:700;
    color:#2ecc71;
}

.note{
    margin:18px auto;
    width:340px;
    text-align:center;
    color:#cfd3dc;
    line-height:1.7;
}
</style>
</head>

<body>

<div class="header">
    V25101874 (Nguyễn Đức Anh)
</div>

<div class="card">
    <div class="top">将二维码对准扫描器刷新出场</div>

    <div class="content">
        <div class="time" id="now"></div>

        <div class="qr-box">
            <img id="qr" src="qr.png">
            <div class="loading" id="loading"></div>
        </div>

        <div class="refresh" onclick="manualRefresh()">刷新二维码</div>
        <div class="timer" id="timer">00:00:30</div>
    </div>
</div>

<div class="note">
尊敬的员工您好，您已进入企业涉密区域，<br>
出于企业安全考虑，您的手机摄像头将被禁止拍摄，<br>
感谢您的配合。
</div>

<script>
/* HIỂN THỊ GIỜ */
setInterval(()=>{
    const d=new Date();
    const p=n=>String(n).padStart(2,'0');
    document.getElementById("now").innerText=
    `${d.getFullYear()}-${p(d.getMonth()+1)}-${p(d.getDate())} ${p(d.getHours())}:${p(d.getMinutes())}:${p(d.getSeconds())}`;
},1000);

/* TIMER ĐÚNG 00:00:SS */
let remain = 30;
function updateTimer(){
    const h = String(Math.floor(remain/3600)).padStart(2,'0');
    const m = String(Math.floor((remain%3600)/60)).padStart(2,'0');
    const s = String(remain%60).padStart(2,'0');
    document.getElementById("timer").innerText = `${h}:${m}:${s}`;
}

setInterval(()=>{
    remain--;
    if(remain<=0){
        autoRefresh();
        remain=30;
    }
    updateTimer();
},1000);

/* AUTO REFRESH – GIỐNG APP */
function autoRefresh(){
    const l=document.getElementById("loading");
    const q=document.getElementById("qr");
    l.style.display="block";
    q.style.opacity=.5;
    setTimeout(()=>{
        l.style.display="none";
        q.style.opacity=1;
    },600);
}

/* CLICK REFRESH */
function manualRefresh(){
    remain=30;
    autoRefresh();
    updateTimer();
}

updateTimer();
</script>

</body>
</html>
