<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Access</title>

<link rel="apple-touch-icon" href="icon.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<style>
body {
    margin: 0;
    background: #2f3347;
    font-family: Arial, sans-serif;
    text-align: center;
    color: #fff;
}

/* TÊN + MÃ NV */
.name {
    margin: 25px 0 15px;
    font-size: 22px;
    font-weight: bold;
    color: #f0d58c;
    cursor: pointer;
}

/* CARD (thu nhỏ nhẹ khi add màn hình chính) */
.card {
    width: 90%;
    max-width: 360px;
    margin: 0 auto;
    background: #ffffff;
    border-radius: 20px;
    padding-bottom: 25px;
    color: #000;
    transform: scale(0.96);
    transform-origin: top center;
}

/* THANH VÀNG + KHÓT GIỮA */
.card-header {
    position: relative;
    background: #ffb703;
    color: #fff;
    padding: 14px;
    font-size: 16px;
    border-radius: 20px 20px 0 0;
}

/* tạo khuyết giống app */
.card-header::after {
    content: "";
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 42px;
    height: 20px;
    background: #ffffff;
    border-radius: 0 0 20px 20px;
}

/* NGÀY + GIỜ 1 HÀNG */
.datetime {
    margin: 25px 0 15px;
    font-size: 20px;
    font-weight: bold;
    white-space: nowrap;
}

/* QR */
.qr {
    margin: 10px auto;
    width: 260px;
}
.qr img {
    width: 100%;
    transition: opacity 0.25s ease, transform 0.25s ease;
}

/* REFRESH */
.refresh {
    margin-top: 10px;
    color: #888;
    font-size: 14px;
    cursor: pointer;
}

/* TIMER */
.timer {
    margin-top: 8px;
    font-size: 26px;
    font-weight: bold;
    color: #2ecc71;
}

/* NOTE – 3 DÒNG GIỐNG APP */
.note {
    margin: 28px auto;
    max-width: 320px;
    font-size: 14px;
    color: #bfc3d9;
    line-height: 1.8;
    text-align: center;
}
</style>
</head>

<body>

<div class="name" onclick="handleNameClick()">
V25101874 (Nguyễn Đức Anh)
</div>

<div class="card">

    <div class="card-header">
        将二维码对准扫描器刷新出场
    </div>

    <div class="datetime" id="datetime"></div>

    <div class="qr">
        <img id="qrImage" src="qr.png">
    </div>

    <div class="refresh" onclick="refreshQR()">
        刷新二维码
    </div>

    <div class="timer" id="timer">00:00:00</div>

</div>

<div class="note">
尊敬的员工您好，您已进入企业涉密区域，<br>
出于企业安全考虑，您的手机摄像头将被禁止拍摄，<br>
感谢您的配合。
</div>

<script>
// ===== NGÀY + GIỜ =====
function updateDateTime() {
    const n = new Date();
    document.getElementById("datetime").innerText =
        n.getFullYear() + "-" +
        String(n.getMonth() + 1).padStart(2, "0") + "-" +
        String(n.getDate()).padStart(2, "0") + " " +
        String(n.getHours()).padStart(2, "0") + ":" +
        String(n.getMinutes()).padStart(2, "0") + ":" +
        String(n.getSeconds()).padStart(2, "0");
}
setInterval(updateDateTime, 1000);
updateDateTime();

// ===== TIMER =====
let seconds = 0;
setInterval(() => {
    seconds++;
    renderTimer();
}, 1000);

function renderTimer() {
    document.getElementById("timer").innerText =
        String(Math.floor(seconds / 3600)).padStart(2, "0") + ":" +
        String(Math.floor((seconds % 3600) / 60)).padStart(2, "0") + ":" +
        String(seconds % 60).padStart(2, "0");
}

// ===== BẤM 3 LẦN =====
let clickCount = 0;
let step = 0;
const steps = [9000, 18000, 28800, 0];

function handleNameClick() {
    clickCount++;
    if (clickCount === 3) {
        seconds = steps[step];
        renderTimer();
        step = (step + 1) % steps.length;
        clickCount = 0;
    }
}

// ===== QR NHÁY =====
function refreshQR() {
    const img = document.getElementById("qrImage");
    img.style.opacity = "0";
    img.style.transform = "scale(0.92)";
    setTimeout(() => {
        img.src = "qr.png?t=" + Date.now();
        img.style.opacity = "1";
        img.style.transform = "scale(1)";
    }, 200);
}
</script>

</body>
</html>
