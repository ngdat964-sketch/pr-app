<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Access</title>

<link rel="apple-touch-icon" href="icon.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<style>
body{
    margin:0;
    background:#2f3347;
    font-family:Arial,sans-serif;
    text-align:center;
    color:#fff;
}

/* TÊN + MÃ NV */
.name{
    margin:24px 0 14px;
    font-size:22px;
    font-weight:bold;
    color:#f0d58c;
    cursor:pointer;
}

/* CARD */
.card{
    width:90%;
    max-width:360px;
    margin:0 auto;
    background:#fff;
    border-radius:20px;
    padding-bottom:24px;
    color:#000;
    overflow:hidden;
}

/* HEADER VÀNG — KHÓT ĐÚNG NHƯ ẢNH THẬT */
.card-header{
    position:relative;
    background:
        radial-gradient(
            circle 14px at 26px 100%,
            transparent 98%,
            #ffb703 100%
        ),
        radial-gradient(
            circle 14px at calc(100% - 26px) 100%,
            transparent 98%,
            #ffb703 100%
        ),
        #ffb703;
    color:#fff;
    padding:14px;
    font-size:16px;
    border-radius:20px 20px 0 0;
}

/* NGÀY GIỜ */
.datetime{
    margin:18px 0 10px;
    font-size:20px;
    font-weight:bold;
    white-space:nowrap;
}

/* QR */
.qr{
    margin:10px auto;
    width:260px;
}
.qr img{
    width:100%;
    transition:transform .4s ease, opacity .3s ease;
}

/* HIỆU ỨNG LOADING */
.loading{
    animation:spin .6s linear;
}
@keyframes spin{
    from{transform:rotate(0deg) scale(.9);}
    to{transform:rotate(360deg) scale(1);}
}

/* REFRESH */
.refresh{
    margin-top:10px;
    font-size:14px;
    color:#999;
    cursor:pointer;
}

/* TIMER */
.timer{
    margin-top:8px;
    font-size:26px;
    font-weight:bold;
    color:#2ecc71;
}

/* NOTE */
.note{
    margin:30px 20px;
    font-size:14px;
    color:#bfc3d9;
    line-height:1.6;
}
</style>
</head>

<body>

<div class="name" onclick="handleNameClick()">
V25101874 (Nguyễn Đức Anh)
</div>

<div class="card">

    <div class="card-header">
        将二维码对准扫描器刷新出场
    </div>

    <div class="datetime" id="datetime"></div>

    <div class="qr">
        <img id="qrImage" src="qr.png">
    </div>

    <div class="refresh" onclick="refreshQR()">刷新二维码</div>

    <div class="timer" id="timer">00:00:00</div>

</div>

<div class="note">
尊敬的员工您好，您已进入企业涉密区域，出于企业安全考虑，您的手机摄像头将被禁止拍摄，感谢您的配合。
</div>

<script>
// ===== DATE TIME =====
function updateDateTime(){
    const n=new Date();
    document.getElementById("datetime").innerText=
        n.getFullYear()+"-"+
        String(n.getMonth()+1).padStart(2,"0")+"-"+
        String(n.getDate()).padStart(2,"0")+" "+
        String(n.getHours()).padStart(2,"0")+":"+
        String(n.getMinutes()).padStart(2,"0")+":"+
        String(n.getSeconds()).padStart(2,"0");
}
setInterval(updateDateTime,1000);
updateDateTime();

// ===== TIMER =====
let seconds=0;
setInterval(()=>{
    seconds++;
    renderTimer();
},1000);

function renderTimer(){
    document.getElementById("timer").innerText=
        String(Math.floor(seconds/3600)).padStart(2,"0")+":"+
        String(Math.floor((seconds%3600)/60)).padStart(2,"0")+":"+
        String(seconds%60).padStart(2,"0");
}

// ===== CLICK 3 LẦN ĐỔI THỜI GIAN =====
let clickCount=0;
let step=0;
const steps=[
    2*3600+30*60, // 2h30
    5*3600,
    8*3600,
    0
];

function handleNameClick(){
    clickCount++;
    if(clickCount===3){
        seconds=steps[step];
        renderTimer();
        step=(step+1)%steps.length;
        clickCount=0;
    }
}

// ===== REFRESH QR + HIỆU ỨNG =====
function refreshQR(){
    const img=document.getElementById("qrImage");
    img.classList.add("loading");
    img.style.opacity="0";

    setTimeout(()=>{
        img.src="qr.png?t="+Date.now();
        img.style.opacity="1";
        img.classList.remove("loading");
    },300);
}
</script>

</body>
</html>
